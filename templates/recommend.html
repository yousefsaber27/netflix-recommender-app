<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>NEW</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" 
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
</head>

<body id="content" style="background-color: #141414;">
  <div class="results text-center">
    <h2 id="name" class="text-uppercase text-white">{{ title }}</h2>
  </div>

  <div id="mycontent" class="container mt-4">
    <div id="mcontent" class="row">
      <div class="col-md-4 text-center">
        <img class="poster img-fluid rounded" src="{{ poster }}" alt="{{ title }} poster" height="400" width="250">
      </div>

      <div class="col-md-8 text-white">
        <h6><strong>Main Title:</strong> {{ title }}</h6>
        <h6><strong>Overview:</strong></h6>
        <p style="max-width: 85%;">{{ overview }}</p>
        <h6><strong>Rating:</strong> {{ vote_average }}/10 ({{ vote_count }} votes)</h6>
        <h6><strong>Genre:</strong> {{ genres }}</h6>
        <h6><strong>Release Date:</strong> {{ release_date }}</h6>
        <h6><strong>Runtime:</strong> {{ runtime }}</h6>
        <h6><strong>Status:</strong> {{ status }}</h6>
      </div>
    </div>
  </div>

  {% for name, details in cast_details.items() %}
  <div class="modal fade" id="{{ details[0] }}" tabindex="-1" role="dialog" aria-labelledby="modalLabel{{ loop.index }}" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header bg-danger text-white">
          <h5 class="modal-title" id="modalLabel{{ loop.index }}">{{ name }}</h5>
          <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body d-flex">
          <img class="rounded" src="{{ details[1] }}" alt="{{ name }}" style="width: 250px; height: 400px;">
          <div class="ml-3">
            <p><strong>Birthday:</strong> {{ details[2] }}</p>
            <p><strong>Place of Birth:</strong> {{ details[3] }}</p>
            <p><strong>Biography:</strong></p>
            <p>{{ details[4] }}</p>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}

  {% if casts %}
  <div class="movie text-center text-light mt-5">
    <h3>ACTORS & ACTRESSES</h3>
    <h5>(Click on the cast to know more)</h5>
  </div>

  <div class="movie-content d-flex flex-wrap justify-content-center mt-3">
    {% for name, details in casts.items() %}
    <div class="castcard card m-2" style="width: 15rem;" data-toggle="modal" data-target="#{{ details[0] }}">
      <div class="imghvr">
        <img class="card-img-top cast-img" src="{{ details[2] }}" alt="{{ name }}">
        <figcaption class="fig">
          <button class="card-btn btn btn-danger">Know More</button>
        </figcaption>
      </div>
      <div class="card-body text-center">
        <h5 class="card-title">{{ name|title }}</h5>
        <h6 class="text-muted">Character: {{ details[1]|title }}</h6>
      </div>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <div class="text-center text-white mt-5">
    {% if reviews %}
    <h2>USER REVIEWS</h2>
    <div class="table-responsive mt-3">
      <table class="table table-bordered text-white" style="background-color: #222;">
        <thead>
          <tr>
            <th class="text-center">Reviews</th>
            <th class="text-center">Status</th>
          </tr>
        </thead>
        <tbody>
          {% for review, status in reviews.items() %}
          <tr style="background-color: #e5091485;">
            <td>{{ review }}</td>
            <td class="text-center">
              {{ status }}:
              {% if status == 'Good' %}
                &#128515;
              {% else %}
                &#128534;
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <h3>This movie is not released yet. Stay tuned!</h3>
    {% endif %}
  </div>

  {% if movie_cards %}
  <div class="movie text-center text-light mt-5">
    <h3>RECOMMENDED MOVIES FOR YOU</h3>
    <h5>(Click any movie to get recommendations)</h5>
  </div>

  <div class="movie-content d-flex flex-wrap justify-content-center mt-3">
    {% for poster, title in movie_cards.items() %}
    <div class="card m-2" style="width: 15rem;" title="{{ title }}" onclick="recommendcard(this)">
      <div class="imghvr">
        <img class="card-img-top" src="{{ poster }}" alt="{{ title }}">
        <figcaption class="fig">
          <button class="card-btn btn btn-danger">View</button>
        </figcaption>
      </div>
      <div class="card-body text-center">
        <h5 class="card-title">{{ title|capitalize }}</h5>
      </div>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="{{ url_for('static', filename='recommend.js') }}"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" 
          integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" 
          integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>
</html>
